
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" class="rest">
    <h:head>
        <title>تقديم خدمة</title>
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
        <meta name="description" content=""/>
        <meta name="author" content=""/>
        <link href="../vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css"/>

        <link href="../css/bootstrap.min.css" rel="stylesheet" type="text/css"/>

        <!-- Custom styles for this template-->
        <link href="../css/sb-admin-2.min.css" rel="stylesheet"/>
        <link href="../css/amer.css" rel="stylesheet"/>

    </h:head>
    <h:body id="page-top">



        <!-- Page Wrapper -->
        <div id="wrapper">
            <!-- Sidebar -->

            <div id="content-wrapper" class="d-flex flex-column">


                <!-- Main Content -->
                <div id="content">

                    <!-- Topbar -->
                    <ui:include src="heder.xhtml"/>
                    <!-- End of Topbar -->
                    <div class="row">
                        <div class="col-lg-12 text-center">


                            <div class=" col-md-12 ">
                                <div class="card border-left-warning border-right-0 shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters textC">
                                            <div class="col mr-2">
                                                <h2 class="section-heading text-uppercase">#{applyServiceManager.serviceCitizen.service.name}</h2>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <br/><hr style="border: 2px solid orange; margin-left: 10px; margin-right: 10px;"/><br/>
                        </div>


                    </div>
                    <h:form id="applycervce" enctype="multipart/form-data">
                        <div class="col-lg-12 mb-4">
                            <div class="col-lg-12" style="text-align: right; min-width:700px ">

                                <div class="card shadow mb-xl-4">
                                    <div class="card-header py-3">
                                        <h6 class="m-0 font-weight-bold text-primary">معلومات الخدمة</h6>
                                    </div>

                                    <div class="card-body">
                                        <div class="row-space flexAm">
                                            <div class="col-xl-6 col-md-6 mb-4">

                                                <div class="card border-right-primary shadow h-100 py-2">
                                                    <div class="card-body">

                                                        <div class="row no-gutters align-items-center">
                                                            <div class="col-auto">
                                                                <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                                                            </div>
                                                            <div class="col mr-2" style="text-align: right">
                                                                <div class="text-xs font-weight-bold text-primary text-uppercase mb-1" >رسوم طلب الخدمة</div>
                                                                <div class="h5 mb-0 font-weight-bold text-gray-800">#{applyServiceManager.serviceCitizen.service.cost}</div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Earnings (Monthly) Card Example -->
                                            <div class="col-xl-6 col-md-6 mb-4">
                                                <div class="card border-right-success shadow h-100 py-2">
                                                    <div class="card-body">
                                                        <div class="row no-gutters align-items-center">

                                                            <div class="col-auto">

                                                                <i class="fa fa-thumbs-up fa-2x text-gray-300"></i>
                                                            </div>
                                                            <div class="col mr-2" style="text-align: right">
                                                                <div class="text-xs font-weight-bold text-success text-uppercase mb-1">عدد ايام الاستجابة</div>
                                                                <div class="h5 mb-0 font-weight-bold text-gray-800">
                                                                    <div style="display: inline;margin-right: 5px">يوم  </div>
                                                                    <div style="display: inline ;float: right"> #{applyServiceManager.serviceCitizen.service.days}</div> 


                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Earnings (Monthly) Card Example -->


                                        </div>
                                        <div class="flexAm row-space" style="margin-right: 14px">
                                            <div class="px-3 mb-2 py-5 bg-gradient-warning  text-white border-bottom-warning ">ملاحظات</div>
                                            <div class=" col-xl-11 col-md-6 px-3  mb-2 py-4  border-bottom-warning ">
                                                <div class="card-body">
                                                    #{applyServiceManager.serviceCitizen.service.note}
                                                </div>
                                            </div>
                                        </div>






                                    </div>
                                </div>



                                <p:outputPanel rendered="#{applyServiceManager.serviceCitizen.sizeAttachment()}">
                                    <div class="card shadow mb-xl-4">
                                        <div class="card-header py-3">
                                            <h6 class="m-0 font-weight-bold text-primary"> متطلبات الخدمة</h6>
                                        </div>

                                        <div class="card-body">

                                            <ui:repeat value="#{applyServiceManager.serviceCitizen.attachment}" var="att" varStatus="in" >
                                                <div class="flexAm row-space " style="margin-right: 14px">

                                                    <div class="px-3 mb-2 py-5 bg-gradient-#{att.color()} text-white border-bottom-#{att.color()}">مطلوب #{in.index+1}</div>
                                                    <div class="col-sm-11 px-5  mb-2 py-4  border-bottom-#{att.color()} ">
                                                        <div class="flexjustify-content row-space" style="margin-right: 14px">
                                                            <div>
                                                                <div class="text-xs font-weight-bold text-xs text-success mb-1" style="font-size: 1.4em">#{att.name}</div>

                                                                <div class="text-xs font-weight-bold text-gray-800 text-uppercase mb-1" style="font-size: 0.8em ; margin-right: 20px;">#{att.notes}</div>

                                                            </div>


                                                            <div id="divDown" class="flexColomn ">

                                                                <p:commandLink oncomplete="PF('dialogatt').show()"  
                                                                               class="btn btn-danger marginBuDel bg-#{att.color()} text-white transparent_btn" style="border-radius: 0;" value="اختيار من الارشيف"
                                                                               >
                                                                    <h:outputText styleClass="fas fa-trash" style="margin:0 auto;" />
                                                                    <f:setPropertyActionListener value="#{att}" target="#{applyServiceManager.selectAtt}" />
                                                                </p:commandLink>

                                                                <p:fileUpload id="uploadAm" label="اختار ملف" value="#{att.file}" mode="simple" skinSimple="true" required="true" 
                                                                              class="bg-#{att.color()} text-white transparent_btn" rendered="true"
                                                                              style="border-color: none;"/>
                                                                <p:message for="uploadAm" display="tooltip" />

                                                                <p:outputLabel rendered="#{att.haveFileToupload()}" >
                                                                    <div class=" font-weight-bold redcolor" style="font-size: 0.8em ; text-align: center;
                                                                         margin-top: 4%; ">يجب ارفاق المتطلب</div>
                                                                </p:outputLabel>
                                                            </div>
                                                        </div>
                                                    </div>


                                                </div>
                                            </ui:repeat>






                                        </div>
                                    </div>
                                </p:outputPanel>




                                <p:outputPanel rendered="#{applyServiceManager.serviceCitizen.sizeAttwhithFile()}">
                                    <div class="card shadow mb-xl-4">
                                        <div class="card-header py-3">
                                            <h6 class="m-0 font-weight-bold text-primary"> مرفقات الخدمة</h6>
                                        </div>

                                        <div class="card-body">
                                            <ui:repeat value="#{applyServiceManager.serviceCitizen.attwhithFile}" var="att" varStatus="in" >
                                                <div class="flexAm row-space " style="margin-right: 14px">

                                                    <div class="px-3 mb-2 py-5 bg-gradient-#{att.color()} text-white border-bottom-#{att.color()}">مطلوب #{in.index+1}</div>
                                                    <div class="col-sm-11 px-5  mb-2 py-4  border-bottom-#{att.color()} ">
                                                        <div class="flexjustify-content row-space" style="margin-right: 14px">
                                                            <dir>
                                                                <div class="text-xs font-weight-bold text-xs text-success mb-1" style="font-size: 1.4em">#{att.name}</div>

                                                                <div class="text-xs font-weight-bold text-gray-800 text-uppercase mb-1" style="font-size: 0.8em ; margin-right: 20px;">#{att.notes}</div>

                                                            </dir>
                                                            <div id="divDown" class="flexColomn ">
                                                                <p:commandButton id="downloadAT"  value="تنزيل" ajax="false" icon="fa fa-arrow-down" class="bg-#{att.color()}" 
                                                                                 style="color: white;">
                                                                    <p:fileDownload value="#{att.fileDownload}"/>
                                                                </p:commandButton>  
                                                                <br/>

                                                                <p:fileUpload required="true" id="uploadAm" label="اختار ملف" value="#{att.file}" mode="simple" 
                                                                              skinSimple="true" rendered="true" style="border-color: none; height: 40%;"
                                                                              class="bg-#{att.color()} text-white transparent_btn1"/>

                                                                <p:message for="uploadAm" display="tooltip"/>

                                                                <p:outputLabel rendered="#{att.haveFileToupload()}">
                                                                    <div class=" font-weight-bold redcolor" 
                                                                         style="font-size: 0.8em ; margin-right: 20px; text-align: center; 
                                                                         margin-top: 4%; border-color: transparent;">يجب ارفاق المتطلب</div>
                                                                </p:outputLabel>
                                                            </div>
                                                        </div>
                                                    </div>


                                                </div>
                                            </ui:repeat>

                                        </div>
                                    </div>
                                </p:outputPanel>
                            </div>

                            <div class="card shadow mb-4">

                                <div class="card-body">

                                    <div style="text-align: right">

                                        <h2 class="section-heading inLineB" style="padding: 10px">:  ملاحظات</h2>
                                        <br/><br/>
                                        <div class="form-group row">
                                            <div class="col-sm-12 py-2">
                                                <p:inputTextarea value="#{applyServiceManager.serviceCitizen.note}" rows="5" cols="100" dir="rtl" style="width: 100%;"/> 
                                            </div>
                                        </div>

                                        <br/><hr style="border: 2px solid orange; margin-left: 10px; margin-right: 10px;"/><br/>


                                    </div>
                                    <div class="text-center">
                                        <p:messages id="messages" showDetail="true" closable="true" for="sub" >
                                            <p:autoUpdate  />
                                        </p:messages>
                                        <p:commandButton id="sub" actionListener="#{applyServiceManager.submit()}" value="تقديم "
                                                         class="myButtonB" ajax="false"  />


                                    </div>

                                </div>




                            </div>




                        </div>




                    </h:form>
                    <h:form id="dialogallShowAttC" >
                        <p:dialog id="dialogatt" resizable="false"  widgetVar="dialogatt" dir="ltr" >
                            <p:dataTable  id="allfiles" var="attarchev" tableStyle="table-layout: auto;" value="#{applyServiceManager.attaCitizenNotForm}"
                                          style="max-width: 1200px" emptyMessage="لا يوجد بيانات"
                                          selection="#{applyServiceManager.selectAttCitizen}"
                                          rowKey="#{attarchev.atta_ArchiveC_ID}" selectionMode="single" >
                                <f:facet name="header"  >
                                    ارشيف المرفقات

                                </f:facet>


                                <p:column headerText="اختيار"  style="width:90px;text-align: center">
                                    <p:commandLink  process="@this" actionListener="#{applyServiceManager.selectfileForAtt(attarchev.atta_ArchiveC_ID)}" oncomplete="PF('dialogatt').hide()"  
                                                    class="btn btn-primary btn-circle marginBuAddblue"
                                                    >
                                        <h:outputText styleClass="fa fa-fw fa-arrow-circle-left" style="margin:0 auto;" />
                                        

                                    </p:commandLink>
                                </p:column>
                                <p:column  headerText="مشاهدة"  style="width:90px;text-align: center">
                                    <p:commandLink update="dialogShowAttC:datshwo dialogShowAttC" process="@this"  oncomplete="PF('attshow').show()"  
                                                   class="btn btn-success btn-circle marginBuAdd"
                                                   >
                                        <h:outputText styleClass="fa fa-fw fa-eye" style="margin:0 auto;" />
                                        <f:setPropertyActionListener value="#{attarchev}" target="#{msession.attachmentArchiveCitizenSELECTED}" />

                                    </p:commandLink>
                                </p:column>

                                <p:column headerText="الحجم">
                                    <h:outputText value="#{attarchev.sizeFile()}" />
                                </p:column>

                                <p:column headerText="اسم الملف" style="width: auto">
                                    <h:outputText value="#{attarchev.nameFile}" />
                                </p:column>
                                <p:column headerText="اسم المرفق">
                                    <h:outputText value="#{attarchev.nameAtt}" />
                                </p:column>

                            </p:dataTable>


                        </p:dialog> 
                    </h:form> 
                    <h:form id="dialogShowAttC" enctype="multipart/form-data">

                        <p:dialog id="datshwo" dir="rtl" header="معلومات المرفق" widgetVar="attshow"  position="top,center" width="800" height="650"
                                 maximizable="true" resizable="false"> 


                            <p:scrollPanel  rendered="#{msession.attachmentArchiveCitizenSELECTED.isImage()}" style="width:auto; height:auto;" mode="native">

                                <div class="CenterFlex">
                                    <h:graphicImage id="image" alt="uploaded image" url="/image?type=asit&amp;f=#{msession.attachmentArchiveCitizenSELECTED.atta_ArchiveC_ID}" 
                                                    style="margin: 10px 0 10px 0; max-height: 100%; max-width: 98%;" />
                                </div>

                                <div class="CenterFlex">#{msession.attachmentArchiveCitizenSELECTED.nameFile}"</div>

                                <div class="CenterFlex" >
                                    <p:commandButton id="downloadAT"  value="تنزيل" ajax="false"  icon="fa fa-arrow-down" 
                                                     style="color: #f1e5e6; background: #e74a3b 50% 50%; margin: 10px 0 10px 0;
                                                     border: none; width: 40%; font-size: 20px; font-weight: bold;">
                                        <p:fileDownload value="#{msession.attachmentArchiveCitizenSELECTED.fileDownload}"/>
                                    </p:commandButton>
                                    <br/>

                                </div>

                            </p:scrollPanel>
                            <p:scrollPanel  rendered="#{msession.attachmentArchiveCitizenSELECTED.isPDF()}" style="width:auto; height:auto;" mode="native">

                                <div class="CenterFlex">
                                    <h:graphicImage id="pdf" alt="uploaded image" value="/imgs/pdf-512.png" style="margin: 10px 0 10px 0; max-height: 100%; max-width: 98%;"/>
                                </div>

                                <div class="CenterFlex">#{msession.attachmentArchiveCitizenSELECTED.nameFile}"</div>

                                <div class="CenterFlex" >
                                    <p:commandButton id="downloadATpdf"  value="تنزيل" ajax="false"  icon="fa fa-arrow-down" 
                                                     style="color: #f1e5e6; background: #e74a3b 50% 50%; margin: 10px 0 10px 0;
                                                     border: none; width: 40%; font-size: 20px; font-weight: bold;">
                                        <p:fileDownload value="#{msession.attachmentArchiveCitizenSELECTED.fileDownload}"/>
                                    </p:commandButton>
                                    <br/>

                                </div>

                            </p:scrollPanel>
                            <p:scrollPanel  rendered="#{msession.attachmentArchiveCitizenSELECTED.canntOpenFile()}" style="width:auto; height:auto;" mode="native">

                                <div class="CenterFlex">
                                    <h:graphicImage id="n" alt="uploaded image" value="/imgs/download.png" style="margin: 10px 0 10px 0; max-height: 100%; max-width: 98%;"/>
                                </div>

                                <div class="CenterFlex">#{msession.attachmentArchiveCitizenSELECTED.nameFile}"</div>

                                <div class="CenterFlex" >
                                    <p:commandButton id="downloadATn"  value="تنزيل" ajax="false"  icon="fa fa-arrow-down" 
                                                     style="color: #f1e5e6; background: #e74a3b 50% 50%; margin: 10px 0 10px 0;
                                                     border: none; width: 40%; font-size: 20px; font-weight: bold;">
                                        <p:fileDownload value="#{msession.attachmentArchiveCitizenSELECTED.fileDownload}"/>
                                    </p:commandButton>
                                    <br/>

                                </div>

                            </p:scrollPanel>


                        </p:dialog>
                    </h:form>

                    <!-- Begin Page Content -->

                </div>

                <br/><br/>
                <!-- End of Main Content -->

                <!-- Footer -->
                <footer class="sticky-footer bg-white">
                    <div class="container my-auto">
                        <div class="copyright text-center my-auto">
                            <span>Copyright © Your Website 2019</span>
                        </div>
                    </div>
                </footer>
                <!-- End of Footer -->

            </div>


            <ui:include src="sidebar.xhtml"/>


        </div>

        <!-- Bootstrap core JavaScript-->
        <script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

        <!-- Core plugin JavaScript-->
        <script src="../vendor/jquery-easing/jquery.easing.min.js"></script>

        <!-- Custom scripts for all pages-->
        <script src="../js/sb-admin-2.min.js"></script>

        <!-- Page level plugins -->

        <script src="../js/js.js" type="text/javascript"></script>
    </h:body>
</html>

